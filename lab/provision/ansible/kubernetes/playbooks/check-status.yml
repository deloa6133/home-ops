---
- hosts: k3s-cluster
  gather_facts: true
  any_errors_fatal: true

  pre_tasks:
    - name: Pausing for 2 seconds...
      ansible.builtin.pause:
        seconds: 2

  tasks:
    # - block:
    #     - name: Ping all hosts
    #       ansible.builtin.ping:

    - block:
        - name: Check cloud-init status
          ansible.builtin.command:
            cmd: "cloud-init status --wait"
        # - name: Gather cloud-init facts
        #   ansible.builtin.cloud_init_data_facts:
        #   register: cloud-init-facts
        # - name: Output cloud-init facts
        #   ansible.builtin.debug:
        #     msg: {{ "cloud-init-facts" }}
